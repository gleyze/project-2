{"version":3,"file":"simple-picker.umd.js","sources":["lib/simple-picker-option.js","simple-picker.umd.js"],"sourcesContent":["/**\n * Copyright 2018 The Pennsylvania State University\n * @license Apache-2.0, see License.md for full text.\n */\nimport { html, PolymerElement } from \"@polymer/polymer/polymer-element.js\";\nimport \"@polymer/iron-icon/iron-icon.js\";\nimport \"@polymer/iron-icons/iron-icons.js\";\nimport \"@lrnwebcomponents/lrn-shared-styles/lrn-shared-styles.js\";\nexport { SimplePickerOption };\n/**\n * `simple-picker-option`\n * `a simple picker for options, icons, etc.`\n *\n * @microcopy - language worth noting:\n *  -\n *\n * @customElement\n * @polymer\n * @see ../simple-picker.js\n * @see ../simple-color-picker-row.js\n */\nclass SimplePickerOption extends PolymerElement {\n  // render function\n  static get template() {\n    return html`\n      <style is=\"custom-style\" include=\"lrn-shared-styles\">\n        :host {\n          display: flex;\n          align-items: center;\n          justify-content: space-between;\n          color: var(--simple-picker-color);\n        }\n        :host([hidden]) {\n          display: none;\n        }\n        :host .label {\n          padding: var(--simple-picker-option-padding, 2px 10px);\n          line-height: 100%;\n          @apply --simple-picker-option-label;\n        }\n\n        :host iron-icon {\n          width: var(--simple-picker-option-size, 24px);\n          min-height: var(--simple-picker-option-size, 24px);\n          min-width: var(--simple-picker-option-size, 24px);\n          line-height: var(--simple-picker-option-size, 24px);\n          @apply --simple-picker-icon;\n        }\n      </style>\n      <iron-icon\n        aria-hidden=\"true\"\n        hidden$=\"[[_hideIcon(icon)]]\"\n        icon$=\"[[icon]]\"\n      ></iron-icon>\n      <div id=\"label\" class$=\"[[_getSrOnly(hideOptionLabels)]]\">[[label]]</div>\n    `;\n  }\n\n  // properties available to the custom element for data binding\n  static get properties() {\n    return {\n      /**\n       * Is the option active?\n       */\n      active: {\n        name: \"active\",\n        type: \"Boolean\",\n        value: null,\n        reflectToAttribute: true\n      },\n\n      /**\n       * The style of the option. (Required for accessibility.)\n       */\n      data: {\n        name: \"data\",\n        type: \"Object\",\n        value: null\n      },\n\n      /**\n       * If the option is hidden\n       */\n      hidden: {\n        name: \"hidden\",\n        type: \"Boolean\",\n        value: false,\n        reflectToAttribute: true\n      },\n\n      /**\n       * Hide option labels? As color-picker or icon-picker, labels may be redundant.\n       * This option would move the labels off-screen so that only screen-readers will have them.\n       */\n      hideOptionLabels: {\n        name: \"hideOptionLabels\",\n        type: \"Boolean\",\n        value: false,\n        reflectToAttribute: true\n      },\n\n      /**\n       * Optional. If option is an iron icon, the iconset:name of the icon\n       */\n      icon: {\n        name: \"icon\",\n        type: \"String\",\n        value: null,\n        reflectToAttribute: false\n      },\n\n      /**\n       * The id of the option\n       */\n      id: {\n        name: \"order\",\n        type: \"String\",\n        value: null,\n        reflectToAttribute: true\n      },\n\n      /**\n       * The text of the option. (Required for accessibility.)\n       */\n      label: {\n        name: \"label\",\n        type: \"String\",\n        value: null,\n        reflectToAttribute: true,\n        observer: \"_updateLabel\"\n      },\n\n      /**\n       * Is the option selected?\n       */\n      selected: {\n        name: \"selected\",\n        type: \"Boolean\",\n        value: false,\n        reflectToAttribute: true\n      },\n\n      /**\n       * Renders html as title. (Good for titles with HTML in them.)\n       */\n      titleAsHtml: {\n        name: \"titleAsHtml\",\n        type: \"Boolean\",\n        value: false,\n        reflectToAttribute: true\n      },\n\n      /**\n       * The value of the option.\n       */\n      value: {\n        name: \"label\",\n        type: \"String\",\n        value: null,\n        reflectToAttribute: true\n      }\n    };\n  }\n\n  /**\n   * Store the tag name to make it easier to obtain directly.\n   * @notice function name must be here for tooling to operate correctly\n   */\n  static get tag() {\n    return \"simple-picker-option\";\n  }\n\n  /**\n   * If the option is not an iron-icon, hide the iron-icon.\n   *\n   * @param {string} icon the icon property\n   * @returns {boolean} whether or not the iron iron should be hidden\n   */\n  _hideIcon(icon) {\n    return this.icon === null;\n  }\n\n  /**\n   * On keyboard focus, fires an event to the picker so that active descendant can be set.\n   * @returns {void}\n   */\n  _handleFocus() {\n    this.dispatchEvent(new CustomEvent(\"option-focus\", { detail: this }));\n  }\n\n  /**\n   * On mouse hover, fires an event to the picker so that active descendant can be set.\n   * @returns {void}\n   */\n  _handleHover() {\n    this.dispatchEvent(new CustomEvent(\"option-focus\", { detail: this }));\n  }\n\n  /**\n   * determines if a label should visible on screen\n   *\n   * @param {boolean} hideOptionLabels property\n   * @returns {string} the sr-only (screenreader-only) class\n   */\n  _getSrOnly(hideOptionLabels) {\n    return hideOptionLabels === false ? \"label\" : \"label sr-only\";\n  }\n\n  /**\n   * updates the title\n   * @returns {void}\n   */\n  _updateLabel() {\n    let label = document.createElement(\"span\");\n    if (this.titleAsHtml !== false) {\n      label.innerHTML = this.label;\n      this.$.label.innerHTML = \"\";\n      this.$.label.appendChild(label);\n    }\n  }\n\n  /**\n   * Set event listeners\n   * @returns {void}\n   */\n  ready() {\n    super.ready();\n    let root = this;\n    this._updateLabel();\n    this.addEventListener(\"focus\", function(e) {\n      root._handleFocus();\n    });\n    this.addEventListener(\"mouseover\", function(e) {\n      root._handleHover();\n    });\n  }\n  /**\n   * life cycle, element is afixed to the DOM\n   * @returns {void}\n   */\n  connectedCallback() {\n    super.connectedCallback();\n  }\n  /**\n   * life cycle, element is removed from the DOM\n   */\n  //disconnectedCallback() {}\n}\nwindow.customElements.define(SimplePickerOption.tag, SimplePickerOption);\n","/**\n * Copyright 2018 The Pennsylvania State University\n * @license Apache-2.0, see License.md for full text.\n */\nimport { html, PolymerElement } from \"@polymer/polymer/polymer-element.js\";\nimport \"@polymer/iron-icon/iron-icon.js\";\nimport \"@polymer/iron-icons/iron-icons.js\";\nimport \"./lib/simple-picker-option.js\";\nexport { SimplePicker };\n/**\n * `simple-picker`\n * `a simple picker for options, icons, etc.`\n *\n * @microcopy - language worth noting:\n *  -\n *\n * @customElement\n * @polymer\n * @demo demo/index.html\n */\nclass SimplePicker extends PolymerElement {\n  \n  // render function\n  static get template() {\n    return html`\n<style>:host {\n  display: inline-flex;\n  align-items: center;\n  color: var(--simple-picker-color, black);\n  font-family: var(--simple-picker-font-family, inherit);\n  font-size: var(--simple-picker-font-size, inherit);\n  max-height: calc(var(--simple-picker-option-size, 24px) + 18px);\n  @apply --simple-picker;\n}\n\n:host([block-label]) {\n  display: block;\n  margin: 0 0 15px;\n  max-height: unset;\n}\n\n:host([disabled]) {\n  cursor: not-allowed;\n}\n\n:host([hidden]) {\n  display: none;\n}\n\n:host label:not([hidden]) {\n  padding-right: 5px;\n  font-family: var(--simple-picker-font-family, inherit);\n  color: var(--simple-picker-label-color, var(--simple-picker-color, black));\n  max-height: calc(var(--simple-picker-option-size, 24px) + 4px);\n  @apply --simple-picker-label;\n}\n\n:host([block-label]) label:not([hidden]) {\n  display: block;\n  padding-right: 0px;\n  color: var(--simple-picker-float-label-color, #888);\n  transition: all 0.5s;\n  max-height: unset;\n}\n\n:host([block-label]:focus) label,\n:host([block-label]:hover) label {\n  color: var(--simple-picker-float-label-active-color, var(--simple-picker-color, black));\n}\n\n:host #sample, \n:host .rows {\n  margin: 0;\n  padding: 0;\n}\n\n:host #listbox {\n  cursor: pointer;\n  display: flex;\n  position: relative;\n  flex: 1 0 auto;\n  max-height: calc(var(--simple-picker-option-size, 24px) + 4px);\n}\n\n:host #sample {\n  display: flex;\n  flex: 1 0 auto;\n  justify-content: space-between;\n  align-items: center;\n  padding: 2px;\n  border-radius: 2px;\n  background-color: var(--simple-picker-background-color,#f0f0f0);\n  border: 1px solid var(--simple-picker-border-color, var(--simple-picker-color, black));\n  @apply --simple-picker-sample;\n}\n:host(:focus) #sample,\n:host #listbox:focus #sample,\n:host #sample:focus {\n  border: 2px solid var(--simple-picker-focus-border-color, var(--simple-picker-color, black));\n  @apply --simple-picker-sample-focus;\n}\n\n:host #listbox:focus {\n  outline: none;\n}\n\n:host #icon {\n  transform: var(--simple-picker-icon-tranform, rotate(0deg));\n  transition: transform 0.25s;\n}\n\n:host([expanded]) #icon {\n  transform: var(--simple-picker-expanded-icon-tranform, rotate(0deg));\n  transition: transform 0.25s;\n}\n\n:host #collapse {\n  display: none;\n  width: 100%;\n  position: absolute;\n  top: calc(var(--simple-picker-option-size, 24px) + 4px);\n  padding: 0 1px;\n  z-index: 2;\n  @apply --simple-picker-collapse;\n}\n\n:host([expanded]:not([disabled])) #collapse {\n  display: block;\n} \n\n:host .rows {\n  display: block;\n  position: absolute;\n  z-index: 1000;\n  outline: 1px solid var(--simple-picker-border-color, var(--simple-picker-color, black));;\n  background-color: var(--simple-picker-background-color,#f0f0f0);\n  box-shadow: 0px 0px 1px #888;\n  @apply --simple-picker-rows;\n}\n\n:host .row {\n  display: flex; \n  align-items: stretch;\n  justify-content: space-between;\n  @apply --simple-picker-row;\n}\n\n:host simple-picker-option {\n  z-index: 1;\n  flex: 1 1 auto;\n  justify-content: flex-start;\n  max-height: unset;\n  min-height: var(--simple-picker-option-size, 24px);\n  min-width: var(--simple-picker-option-size, 24px);\n  line-height: var(--simple-picker-option-size, 24px);\n  color: var(--simple-picker-color);\n  background-color: var(--simple-picker-option-background-color, #ffffff);\n  outline: var(--simple-picker-option-outline, none);\n  transition: max-height 2s;\n  @apply --simple-picker-option;\n}\n\n:host(:not([value])) #sample simple-picker-option,\n:host([value=\"null\"]) #sample simple-picker-option {\n  @apply --simple-picker-sample-null;\n  --simple-picker-option-label: {\n    @apply --simple-picker-sample-null-label;\n  };\n}\n\n:host simple-picker-option[selected] {\n  z-index: 50;\n  color: var(--simple-picker-color);\n  background-color: var(--simple-picker-selected-option-background-color, #e8e8e8);\n  outline: var(--simple-picker-selected-option-outline, none);\n}\n\n:host simple-picker-option[active] {\n  z-index: 100;\n  cursor: pointer;\n  color: var(--simple-picker-color);\n  background-color: var(--simple-picker-active-option-background-color, #aaddff);\n  outline: var(--simple-picker-active-option-outline, none);\n}\n\n:host #sample simple-picker-option {\n  color: var(--simple-picker-sample-color,  var(--simple-picker-color));\n  background-color: var(--simple-picker-sample-background-color, transparent);\n  --simple-picker-option-padding: 2px 0;\n  --simple-picker-option-label: {\n    @apply --simple-picker-sample-label;\n  }\n  @apply --simple-picker-sample-option;\n  border: none;\n}\n\n:host(:not([expanded])) #collapse simple-picker-option {\n  max-height: 0;\n  transition: max-height 1.5s;\n}\n\n:host #collapse simple-picker-option:not([value]),\n:host #collapse simple-picker-option[value=null] {\n  @apply --simple-picker-option-null;\n}\n\n@media screen and (max-width: 600px) {\n  :host {\n    position: static;\n  }\n  :host #collapse {\n    top: 0;\n    margin-top: 0;\n    position: relative;\n  } \n  :host .rows {\n    position: sticky;\n  }  \n}\n</style>\n<label id=\"listLabel\" for=\"listbox\" hidden$=\"[[!hasLabel]]\">[[label]]</label>\n<div id=\"listbox\"\n  aria-activedescendant$=\"[[__activeDesc]]\" \n  aria-labelledby$=\"[[ariaLabelledby]]\" \n  disabled$=\"[[disabled]]\"\n  role=\"listbox\" \n  tabindex=\"0\">\n  <div id=\"sample\">\n    <simple-picker-option \n      aria-hidden=\"true\" \n      hide-option-labels$=\"[[hideOptionLabels]]\"\n      icon$=\"[[__selectedOption.icon]]\"\n      label$=\"[[__selectedOption.alt]]\"\n      style$=\"[[__selectedOption.style]]\" \n      title-as-html$=\"[[titleAsHtml]]\">\n    </simple-picker-option>\n    <span id=\"icon\"><iron-icon aria-hidden=\"true\" icon=\"arrow-drop-down\"></iron-icon></span>\n  </div>\n  <div id=\"collapse\">\n    <div class=\"rows\">\n      <template is=\"dom-repeat\" items=\"[[__options]]\" as=\"row\" index-as=\"rownum\" restamp>\n        <div class=\"row\">\n          <template is=\"dom-repeat\" items=[[row]] as=\"option\" index-as=\"colnum\" restamp>\n            <simple-picker-option \n              active$=\"[[_isActive(__activeDesc,rownum,colnum)]]\"\n              aria-selected$=\"[[_isSelected(value,option.value)]]\"\n              data$=\"[[data]]\"\n              hide-option-labels$=\"[[hideOptionLabels]]\"\n              hidden$=\"[[_hideNullOption(option.value,allowNull)]]\"\n              icon$=\"[[option.icon]]\"\n              id$=\"[[_getOptionId(rownum,colnum)]]\"\n              label$=\"[[option.alt]]\"\n              role=\"option\"\n              selected$=\"[[_isSelected(value,option.value)]]\"\n              on-option-focus=\"_handleOptionFocus\"\n              on-set-selected-option=\"_handleSetSelectedOption\"\n              style$=\"[[option.style]]\" \n              tabindex=\"-1\"\n              title-as-html$=\"[[titleAsHtml]]\"\n              value=\"[[option.value]]\">\n            </simple-picker-option>\n          </template>\n        </div>\n      </template>\n    </div>\n  </div>\n</div>`;\n  }\n\n  // properties available to the custom element for data binding\n    static get properties() {\n    let props = {\n  \"allowNull\": {\n    \"name\": \"allowNull\",\n    \"type\": Boolean,\n    \"value\": false,\n    \"reflectToAttribute\": true\n  },\n  /**\n   * Optional. Sets the aria-labelledby attribute\n   */\n  \"ariaLabelledby\": {\n    \"name\": \"ariaLabelledby\",\n    \"type\": String,\n    \"value\": null\n  },\n\n  /**\n   * Position label above select dropdown?\n   */\n  \"blockLabel\": {\n    \"name\": \"blockLabel\",\n    \"type\": Boolean,\n    \"value\": false,\n    \"reflectToAttribute\": true\n  },\n\n  /**\n   * Is the picker disabled?\n   */\n  \"disabled\": {\n    \"name\": \"disabled\",\n    \"type\": Boolean,\n    \"value\": false\n  },\n\n  /**\n   * Is it expanded?\n   */\n  \"expanded\": {\n    \"name\": \"expanded\",\n    \"type\": Boolean,\n    \"value\": false,\n    \"reflectToAttribute\": true\n  },\n\n  /**\n   * Hide option labels? As color-picker or icon-picker, labels may be redundant.\n   * This option would move the labels off-screen so that only screen-readers will have them.\n   */\n  \"hideOptionLabels\": {\n    \"name\": \"hideOptionLabels\",\n    \"type\": Boolean,\n    \"value\": false\n  },\n\n  /**\n   * Optional. The label for the picker input\n   */\n  \"label\": {\n    \"name\": \"label\",\n    \"type\": String,\n    \"value\": null,\n    \"observer\": \"_setLabel\"\n  },\n\n  /**\n   * An array of options for the picker, eg.: `\n[\n  [\n    {\n      \"icon\": \"editor:format-paint\",      //Optional. Used if the picker is used as an icon picker.\n      \"alt\": \"Blue\",                      //Required for accessibility. Alt text description of the choice.\n      \"style\": \"background-color: blue;\", //Optional. Used to set an option's style.\n      ...                                 //Optional. Any other properties that should be captured as part of the selected option's value\n    },...\n  ]\n]`\n   */\n  \"options\": {\n    \"name\": \"options\",\n    \"type\": Array,\n    \"value\": [\n      [\n        {\n          \"icon\": null,\n          \"style\": null,\n          \"alt\": null,\n          \"value\": null\n        }\n      ]\n    ],\n    \"observer\": \"_setSelectedOption\"\n  },\n\n  /**\n   * position the swatches relative to the picker, where:\n   * `left` aligns the swatches to the picker's left edge\n   * `right` aligns the swatches to the picker's right edge\n   * `center` aligns the swatches to the picker's center\n  \"position\": {\n    \"name\": \"position\",\n    \"type\": Boolean,\n    \"value\": \"left\",\n    \"reflectToAttribute\": false,\n    \"observer\": false\n  },\n   */\n\n  /**\n   * Renders html as title. (Good for titles with HTML in them.)\n   */\n  \"titleAsHtml\": {\n    \"name\": \"titleAsHtml\",\n    \"type\": Boolean,\n    \"value\": false\n  },\n\n  /**\n   * An string that stores the current value for the picker\n   */\n  \"value\": {\n    \"name\": \"value\",\n    \"type\": Object,\n    \"value\": null,\n    \"notify\": true,\n    \"observer\": \"_setSelectedOption\",\n    \"reflectToAttribute\": true\n  },\n\n  /**\n   * The aria-activedescendant attribute (active option's ID)\n   */\n  \"__activeDesc\": {\n    \"name\": \"__activeDesc\",\n    \"type\": String,\n    \"value\": \"option-0-0\"\n  },\n\n  /**\n   * Whether or not a label should be added\n   */\n  \"__hasLabel\": {\n    \"name\": \"__hasLabel\",\n    \"type\": Boolean,\n    \"value\": true\n  },\n\n  /**\n   * The selected option based on the value of the picker\n   */\n  \"__selectedOption\": {\n    \"name\": \"_setSelectedOption\",\n    \"type\": Object\n  }\n}\n;\n    if (super.properties) {\n      props = Object.assign(props, super.properties);\n    }\n    return props;\n  }\n\n  /**\n   * Store the tag name to make it easier to obtain directly.\n   * @notice function name must be here for tooling to operate correctly\n   */\n  static get tag() {\n    return \"simple-picker\";\n  }\n\n  /**\n   * returns the value of the selected option.\n   *\n   * @param {string} options the options\n   * @param {string} optionId the selected option's id\n   * @returns {object} the selected option\n   */\n  _getOption(options, optionId) {\n    if (options !== undefined && optionId !== undefined && optionId !== null) {\n      let coords = optionId.split(\"-\");\n      return options[coords[1]][coords[2]];\n    }\n    return null;\n  }\n\n  /**\n   * returns a unique id for the option based on its row and column.\n   *\n   * @param {number} rownum the row number\n   * @param {number} colnum the column number\n   * @returns {string} a unique id\n   */\n  _getOptionId(rownum, colnum) {\n    return \"option-\" + rownum + \"-\" + colnum;\n  }\n\n  /**\n   * sets a new active descendant and sets focus on it\n   *\n   * @param {number} rownum the row number to be tested\n   * @param {number} colnum the column number to be tested\n   * @returns {void}\n   */\n  _goToOption(rownum, colnum) {\n    let targetId = this._getOptionId(rownum, colnum),\n      target = this.shadowRoot.querySelector(\"#\" + targetId),\n      active = this.shadowRoot.querySelector(\"#\" + this.__activeDesc);\n    if (target !== null) {\n      target.tabindex = 0; //allow the item to be focusable.\n      target.focus();\n      active.tabindex = -1; //prevent tabbing between options.\n    }\n  }\n\n  /**\n   * handles listbox click event\n   *\n   * @param {event} e the event\n   * @param {string} type the type of event\n   * @returns {void}\n   */\n  _handleListboxEvent(e, type) {\n    this.dispatchEvent(new CustomEvent(type, { detail: this }));\n    if (type === \"click\") this._toggleListbox(!this.expanded);\n  }\n\n  /**\n   * handles listbox keyboard events\n   *\n   * @param {event} e the event\n   * @returns {void}\n   */\n  _handleListboxKeydown(e) {\n    this.dispatchEvent(new CustomEvent(\"keydown\", { detail: this }));\n    let coords = this.__activeDesc.split(\"-\"),\n      rownum = parseInt(coords[1]),\n      colnum = parseInt(coords[2]);\n    if (e.keyCode === 32) {\n      //spacebar\n      e.preventDefault();\n      this._toggleListbox(!this.expanded);\n    } else if (this.expanded && [9, 35, 36, 38, 40].includes(e.keyCode)) {\n      e.preventDefault();\n      if (e.keyCode === 35) {\n        //end\n        let lastrow = this.options.length - 1,\n          lastcol = this.options[lastrow].length - 1;\n        this._goToOption(lastrow, lastcol); //move to last option\n      } else if (e.keyCode === 36) {\n        //home\n        this._goToOption(0, 0); //move to first option\n      } else if (e.keyCode === 38) {\n        //previous (up arrow)\n        if (colnum > 0) {\n          this._goToOption(rownum, colnum - 1); //move up to previous column\n        } else if (rownum > 0) {\n          this._goToOption(rownum - 1, this.options[rownum - 1].length - 1); //move up to end of previous row\n        }\n      } else if (e.keyCode === 40) {\n        //next (down arrow)\n        if (colnum < this.options[rownum].length - 1) {\n          //move down to next column\n          this._goToOption(rownum, colnum + 1);\n        } else if (rownum < this.options.length - 1) {\n          //move down to beginning of next row\n          this._goToOption(rownum + 1, [0]);\n        }\n      }\n    }\n  }\n\n  /**\n   * handles option focus event and sets the active descendant\n   *\n   * @param {event} e the event\n   * @returns {void}\n   */\n  _handleOptionFocus(e) {\n    this._setActiveOption(e.detail.id);\n  }\n\n  /**\n   * Determines if a label should be added\n   *\n   * @param {string} label\n   * @returns {boolean} if there is a label\n   */\n  _setLabel() {\n    let label = this.shadowRoot.querySelector(\"#listLabel\");\n    this.hasLabel =\n      this.label !== undefined &&\n      this.label !== null &&\n      this.label.trim() !== \"\";\n    label.innerHTML =\n      this.label !== undefined &&\n      this.label !== null &&\n      this.label.trim() !== \"\"\n        ? this.label.trim()\n        : \"\";\n  }\n  /**\n   * determines if an option is hidden a d can't be selected\n   *\n   * @param {string} val option value\n   * @param {boolean} allowNull whether or not null option can be selected\n   * @returns {boolean} whether or not the option should be hidden\n   */\n  _hideNullOption(val, allowNull) {\n    return !allowNull && (val === undefined || val === null);\n  }\n\n  /**\n   * gets sets active option based on a row and column\n   *\n   * @param {string} active active option's id\n   * @param {number} rownum the row number to be tested\n   * @param {number} colnum the column number to be tested\n   * @returns {boolean} whether or not the option is at the given row and column\n   */\n  _isActive(active, rownum, colnum) {\n    return active === this._getOptionId(rownum, colnum);\n  }\n\n  /**\n   * determines if an option is at a given row and column\n   *\n   * @param {string} value1 current value\n   * @param {string} value2 an option's value\n   * @returns {boolean} whether or not the option is selected\n   */\n  _isSelected(value1, value2) {\n    return value1 === value2;\n  }\n\n  /**\n   * sets the  active descendant to a given option's id\n   *\n   * @param {string} id the option id\n   * @returns {void}\n   */\n  _setActiveOption(id) {\n    this.__activeDesc = id;\n    this.dispatchEvent(new CustomEvent(\"option-focus\", { detail: this }));\n  }\n\n  /**\n   * sets the selected option to a given option's id\n   * @returns {void}\n   */\n  _setSelectedOption() {\n    let sel = null;\n    if (this.options !== undefined && this.options !== null) {\n      this.set(\n        \"__options\",\n        typeof this.options === \"string\"\n          ? JSON.parse(this.options)\n          : this.options.slice()\n      );\n\n      //if nulls are allowed, set the active descendant to the first not null option\n      this.__activeDesc = this.allowNull ? \"option-0-0\" : null;\n      for (var i = 0; i < this.__options.length; i++) {\n        for (var j = 0; j < this.__options[i].length; j++) {\n          //if unset, set the active descendant to the first not null option\n          if (this.value !== null && this.__activeDesc === null)\n            this.__activeDesc = \"option-\" + i + \"-\" + j;\n          if (this.__options[i][j].value === this.value) {\n            //set the active descendant to the option that matches the value\n            this.__activeDesc = \"option-\" + i + \"-\" + j;\n            sel = this.__options[i][j];\n          }\n        }\n      }\n    }\n    if (sel === null) this.value = null;\n    this.__selectedOption = sel;\n    this.dispatchEvent(\n      new CustomEvent(\"change\", { bubbles: true, detail: this })\n    );\n  }\n\n  /**\n   * toggles the listbox\n   *\n   * @param {boolean} expanded is the listbox expanded?\n   * @returns {void}\n   */\n  _toggleListbox(expanded) {\n    let active = this.shadowRoot.querySelector(\"#\" + this.__activeDesc);\n    this.expanded = expanded;\n    if (expanded) {\n      if (active !== null) active.focus();\n      this.dispatchEvent(new CustomEvent(\"expand\", { detail: this }));\n    } else {\n      if (active !== null) this.value = active.getAttribute(\"value\");\n      this.dispatchEvent(new CustomEvent(\"collapse\", { detail: this }));\n    }\n  }\n\n  /**\n   * Set event listeners\n   * @returns {void}\n   */\n  ready() {\n    super.ready();\n    let root = this;\n    if (this.$.listbox !== undefined) {\n      this.$.listbox.addEventListener(\"click\", function(e) {\n        root._handleListboxEvent(e, \"click\");\n      });\n      this.$.listbox.addEventListener(\"mousedown\", function(e) {\n        root._handleListboxEvent(e, \"mousedown\");\n      });\n      this.$.listbox.addEventListener(\"keydown\", function(e) {\n        root._handleListboxKeydown(e);\n      });\n      this.addEventListener(\"blur\", function(e) {\n        this.expanded = false;\n      });\n    }\n  }\n\n  /**\n   * sets the options for the picker\n   *\n   * @param {array} options the nested array of options\n   * @returns {void}\n   */\n  setOptions(options) {\n    this.set(\"options\", [[]]);\n    this.set(\"options\", options);\n  }\n\n  /**\n   * life cycle, element is afixed to the DOM\n   * @returns {void}\n   */\n  connectedCallback() {\n    super.connectedCallback();\n  }\n  /**\n   * life cycle, element is removed from the DOM\n   */\n  //disconnectedCallback() {}\n}\nwindow.customElements.define(SimplePicker.tag, SimplePicker);\n"],"names":["SimplePickerOption","PolymerElement","icon","this","dispatchEvent","CustomEvent","detail","hideOptionLabels","label","document","createElement","titleAsHtml","innerHTML","$","appendChild","root","_updateLabel","addEventListener","e","_handleFocus","_handleHover","html","active","name","type","value","reflectToAttribute","data","hidden","id","observer","selected","window","customElements","define","tag","SimplePicker","options","optionId","undefined","coords","split","rownum","colnum","targetId","_getOptionId","target","shadowRoot","querySelector","__activeDesc","tabindex","focus","_toggleListbox","expanded","parseInt","keyCode","preventDefault","includes","lastrow","length","lastcol","_goToOption","_setActiveOption","hasLabel","trim","val","allowNull","value1","value2","sel","set","JSON","parse","slice","i","__options","j","__selectedOption","bubbles","getAttribute","listbox","_handleListboxEvent","_handleListboxKeydown","props","Boolean","String","Array","Object","assign"],"mappings":"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"}